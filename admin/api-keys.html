<!DOCTYPE html>
<html lang="en" dir="ltr" data-nav-layout="vertical" data-theme-mode="light" data-header-styles="transparent" data-width="fullwidth" data-menu-styles="transparent" data-page-style="flat" data-toggled="close">

<head>
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BizVisibility AI - API Keys</title>
    <link rel="icon" href="../assets/images/brand-logos/favicon.ico" type="image/x-icon">
    <script src="../assets/libs/choices.js/public/assets/scripts/choices.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <link id="style" href="../assets/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/styles.css" rel="stylesheet">
    <link href="../assets/css/icons.css" rel="stylesheet">
    <link href="../assets/libs/node-waves/waves.min.css" rel="stylesheet">
    <link href="../assets/libs/simplebar/simplebar.min.css" rel="stylesheet">
</head>

<body>
    <div class="page">
        <!-- Header -->
        <header class="app-header sticky">
            <div class="main-header-container container-fluid">
                <div class="header-content-left">
                    <div class="header-element">
                        <div class="horizontal-logo">
                            <a href="dashboard.html" class="header-logo">
                                <img src="../assets/images/brand-logos/desktop-logo.png" alt="logo" class="desktop-logo">
                                <img src="../assets/images/brand-logos/desktop-dark.png" alt="logo" class="desktop-dark">
                            </a>
                        </div>
                    </div>
                    <div class="header-element">
                        <a aria-label="Hide Sidebar" class="sidemenu-toggle header-link animated-arrow hor-toggle horizontal-navtoggle" data-bs-toggle="sidebar" href="javascript:void(0);"><span></span></a>
                    </div>
                </div>
                
                <ul class="header-content-right">
                    <li class="header-element header-theme-mode">
                        <a href="javascript:void(0);" class="header-link layout-setting">
                            <span class="light-layout">
                                <svg xmlns="http://www.w3.org/2000/svg" class="header-link-icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M108.11,28.11A96.09,96.09,0,0,0,227.89,147.89,96,96,0,1,1,108.11,28.11Z" opacity="0.2"/><path d="M108.11,28.11A96.09,96.09,0,0,0,227.89,147.89,96,96,0,1,1,108.11,28.11Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                            </span>
                            <span class="dark-layout">
                                <svg xmlns="http://www.w3.org/2000/svg" class="header-link-icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><circle cx="128" cy="128" r="56" opacity="0.2"/><line x1="128" y1="40" x2="128" y2="32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="128" cy="128" r="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="64" y1="64" x2="56" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="64" y1="192" x2="56" y2="200" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="192" y1="64" x2="200" y2="56" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="192" y1="192" x2="200" y2="200" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="40" y1="128" x2="32" y2="128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="128" y1="216" x2="128" y2="224" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="216" y1="128" x2="224" y2="128" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                            </span>
                        </a>
                    </li>
                    <li class="header-element dropdown">
                        <a href="javascript:void(0);" class="header-link dropdown-toggle" id="mainHeaderProfile" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                            <div>
                                <img src="../assets/images/faces/12.jpg" alt="img" class="header-link-icon">
                            </div>
                        </a>
                        <div class="main-header-dropdown dropdown-menu pt-0 overflow-hidden header-profile-dropdown dropdown-menu-end" aria-labelledby="mainHeaderProfile">
                            <div class="p-3 bg-primary text-fixed-white">
                                <p class="mb-0 fs-16">Admin Profile</p>
                            </div>
                            <div class="dropdown-divider"></div>
                            <ul class="list-unstyled mb-0">
                                <li>
                                    <a class="dropdown-item d-flex align-items-center" href="profile-settings.html"><i class="ri-settings-gear-line me-2"></i>Admin Settings</a>
                                </li>
                                <li>
                                    <a class="dropdown-item d-flex align-items-center" href="../login.html"><i class="ri-logout-box-line me-2"></i>Log Out</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </header>
        
        <!-- Sidebar -->
        <aside class="app-sidebar sticky" id="sidebar">
            <div class="main-sidebar-header">
                <a href="dashboard.html" class="header-logo">
                    <img src="../assets/images/brand-logos/desktop-logo.png" alt="logo" class="desktop-logo">
                    <img src="../assets/images/brand-logos/desktop-dark.png" alt="logo" class="desktop-dark">
                </a>
            </div>
            
            <div class="main-sidebar has-footer" id="sidebar-scroll">
                <nav class="main-menu-container nav nav-pills flex-column sub-open">
                    <ul class="main-menu">
                        <li class="slide">
                            <a href="dashboard.html" class="side-menu__item">
                                <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M133.66,34.34a8,8,0,0,0-11.32,0L40,116.69V216h64V152h48v64h64V116.69Z" opacity="0.2"/><line x1="16" y1="216" x2="240" y2="216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><polyline points="152 216 152 152 104 152 104 216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="40" y1="116.69" x2="40" y2="216" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="216" y1="216" x2="216" y2="116.69" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M24,132.69l98.34-98.35a8,8,0,0,1,11.32,0L232,132.69" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                                <span class="side-menu__label">Dashboard</span>
                            </a>
                        </li>
                        <li class="slide">
                            <a href="users.html" class="side-menu__item">
                                <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><circle cx="88" cy="104" r="40" opacity="0.2"/><circle cx="88" cy="104" r="40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M16,216a64,64,0,0,1,144,0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="168" cy="120" r="32" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M131.37,203a56,56,0,0,1,89.26,0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                                <span class="side-menu__label">Users & Businesses</span>
                            </a>
                        </li>
                        <li class="slide">
                            <a href="plans.html" class="side-menu__item">
                                <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M48,120h160V80a8,8,0,0,0-8-8H56a8,8,0,0,0-8,8Z" opacity="0.2"/><rect x="48" y="72" width="160" height="112" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M80,184v16a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8v-16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M176,184v16a8,8,0,0,0,8,8h8a8,8,0,0,0,8-8v-16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="96" y1="120" x2="96" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><line x1="160" y1="120" x2="160" y2="168" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                                <span class="side-menu__label">Plans</span>
                            </a>
                        </li>
                        <li class="slide">
                            <a href="api-keys.html" class="side-menu__item active">
                                <svg xmlns="http://www.w3.org/2000/svg" class="side-menu__icon" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"/><path d="M216,56H40A16,16,0,0,0,24,72V184a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V72A16,16,0,0,0,216,56Zm0,128H40V72H216v112Z" opacity="0.2"/><rect x="40" y="56" width="176" height="128" rx="8" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><circle cx="120" cy="120" r="16" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/><path d="M80,120a40,40,0,0,1,80,0" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"/></svg>
                                <span class="side-menu__label">API Keys</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content app-content">
            <div class="container-fluid page-container">
                <div class="d-flex align-items-center justify-content-between mb-4">
                    <div>
                        <h1 class="page-title fw-bold mb-0">API Keys Management</h1>
                        <p class="text-muted">View and manage API keys for your application</p>
                    </div>
                </div>

                <!-- Alerts Container -->
                <div id="alertContainer"></div>

                <!-- OpenAI Configuration -->
                <div class="card custom-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="ri-openai-fill me-2"></i>OpenAI Configuration</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="openaiApiKey" class="form-label">API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="openaiApiKey" placeholder="Enter OpenAI API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('openaiApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="openaiModel" class="form-label">Model</label>
                                <input type="text" class="form-control" id="openaiModel" placeholder="e.g., gpt-4">
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="openaiBaseUrl" class="form-label">Base URL</label>
                                <input type="text" class="form-control" id="openaiBaseUrl" placeholder="https://api.openai.com/v1/">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LLM Provider Selection -->
                <div class="card custom-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="ri-settings-3-line me-2"></i>LLM Provider</h5>
                    </div>
                    <div class="card-body">
                        <label for="llmProvider" class="form-label">Select Provider</label>
                        <select class="form-control" id="llmProvider">
                            <option value="openai">OpenAI</option>
                            <option value="openrouter">OpenRouter</option>
                        </select>
                    </div>
                </div>

                <!-- OpenRouter Configuration -->
                <div class="card custom-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="ri-router-line me-2"></i>OpenRouter Configuration</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="openrouterApiKey" class="form-label">API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="openrouterApiKey" placeholder="Enter OpenRouter API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('openrouterApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="openrouterModel" class="form-label">Model</label>
                                <input type="text" class="form-control" id="openrouterModel" placeholder="e.g., anthropic/claude-3-sonnet">
                            </div>
                            <div class="col-md-12 mb-3">
                                <label for="openrouterBaseUrl" class="form-label">Base URL</label>
                                <input type="text" class="form-control" id="openrouterBaseUrl" placeholder="https://openrouter.ai/api/v1/">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="openrouterSiteUrl" class="form-label">Site URL</label>
                                <input type="text" class="form-control" id="openrouterSiteUrl" placeholder="http://localhost:8000">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="openrouterAppTitle" class="form-label">App Title</label>
                                <input type="text" class="form-control" id="openrouterAppTitle" placeholder="App Title">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- External APIs -->
                <div class="card custom-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="ri-global-line me-2"></i>External APIs</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="pagespeedApiKey" class="form-label">PageSpeed Insights API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="pagespeedApiKey" placeholder="Enter PageSpeed API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('pagespeedApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="serperApiKey" class="form-label">Serper API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="serperApiKey" placeholder="Enter Serper API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('serperApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="googlePlacesApiKey" class="form-label">Google Places API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="googlePlacesApiKey" placeholder="Enter Google Places API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('googlePlacesApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="googleAuthApiKey" class="form-label">Google Auth API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="googleAuthApiKey" placeholder="Enter Google Auth API Key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('googleAuthApiKey')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mail Configuration -->
                <div class="card custom-card">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="ri-mail-line me-2"></i>Mail Configuration</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="mailMailer" class="form-label">Mailer</label>
                                <input type="text" class="form-control" id="mailMailer" placeholder="e.g., log, smtp, sendmail">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailScheme" class="form-label">Scheme</label>
                                <input type="text" class="form-control" id="mailScheme" placeholder="e.g., tls, ssl, null">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailHost" class="form-label">Host</label>
                                <input type="text" class="form-control" id="mailHost" placeholder="e.g., smtp.mailtrap.io">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailPort" class="form-label">Port</label>
                                <input type="number" class="form-control" id="mailPort" placeholder="e.g., 2525">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailUsername" class="form-label">Username</label>
                                <input type="text" class="form-control" id="mailUsername" placeholder="Username">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailPassword" class="form-label">Password</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="mailPassword" placeholder="Password">
                                    <button class="btn btn-outline-secondary" type="button" onclick="toggleKeyVisibility('mailPassword')"><i class="ri-eye-line"></i></button>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailFromAddress" class="form-label">From Address</label>
                                <input type="email" class="form-control" id="mailFromAddress" placeholder="hello@example.com">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="mailFromName" class="form-label">From Name</label>
                                <input type="text" class="form-control" id="mailFromName" placeholder="Application Name">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="card custom-card">
                    <div class="card-body">
                        <button type="button" class="btn btn-primary" onclick="saveApiKeys()"><i class="ri-save-line me-2"></i>Save Changes</button>
                        <button type="button" class="btn btn-secondary ms-2" onclick="resetApiKeys()"><i class="ri-refresh-line me-2"></i>Reset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load API keys on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadApiKeys();
        });

        // API Keys object - loads from localStorage or defaults
        let apiKeys = {
            OPENAI_API_KEY: '',
            OPENAI_MODEL: 'gpt-4',
            OPENAI_BASE_URL: 'https://api.openai.com/v1/',
            LLM_PROVIDER: 'openai',
            OPENROUTER_API_KEY: '',
            OPENROUTER_MODEL: 'anthropic/claude-3-sonnet',
            OPENROUTER_BASE_URL: 'https://openrouter.ai/api/v1/',
            OPENROUTER_SITE_URL: 'http://localhost:8000',
            OPENROUTER_APP_TITLE: 'Reputation Audit API',
            PAGESPEED_API_KEY: '',
            SERPER_API_KEY: '',
            GOOGLE_PLACES_API_KEY: '',
            GOOGLE_AUTH_API_KEY: '',
            MAIL_MAILER: 'log',
            MAIL_SCHEME: 'null',
            MAIL_HOST: '127.0.0.1',
            MAIL_PORT: '2525',
            MAIL_USERNAME: '',
            MAIL_PASSWORD: '',
            MAIL_FROM_ADDRESS: 'hello@example.com',
            MAIL_FROM_NAME: 'BizVisibility AI'
        };

        function loadApiKeys() {
            // Try to load from localStorage first
            const savedKeys = localStorage.getItem('apiKeys');
            if (savedKeys) {
                try {
                    const parsed = JSON.parse(savedKeys);
                    apiKeys = { ...apiKeys, ...parsed };
                } catch (e) {
                    console.warn('Failed to parse saved API keys:', e);
                }
            }

            // Populate form fields from apiKeys object
            document.getElementById('openaiApiKey').value = apiKeys.OPENAI_API_KEY;
            document.getElementById('openaiModel').value = apiKeys.OPENAI_MODEL;
            document.getElementById('openaiBaseUrl').value = apiKeys.OPENAI_BASE_URL;
            document.getElementById('llmProvider').value = apiKeys.LLM_PROVIDER;
            document.getElementById('openrouterApiKey').value = apiKeys.OPENROUTER_API_KEY;
            document.getElementById('openrouterModel').value = apiKeys.OPENROUTER_MODEL;
            document.getElementById('openrouterBaseUrl').value = apiKeys.OPENROUTER_BASE_URL;
            document.getElementById('openrouterSiteUrl').value = apiKeys.OPENROUTER_SITE_URL;
            document.getElementById('openrouterAppTitle').value = apiKeys.OPENROUTER_APP_TITLE;
            document.getElementById('pagespeedApiKey').value = apiKeys.PAGESPEED_API_KEY;
            document.getElementById('serperApiKey').value = apiKeys.SERPER_API_KEY;
            document.getElementById('googlePlacesApiKey').value = apiKeys.GOOGLE_PLACES_API_KEY;
            document.getElementById('googleAuthApiKey').value = apiKeys.GOOGLE_AUTH_API_KEY;
            document.getElementById('mailMailer').value = apiKeys.MAIL_MAILER;
            document.getElementById('mailScheme').value = apiKeys.MAIL_SCHEME;
            document.getElementById('mailHost').value = apiKeys.MAIL_HOST;
            document.getElementById('mailPort').value = apiKeys.MAIL_PORT;
            document.getElementById('mailUsername').value = apiKeys.MAIL_USERNAME;
            document.getElementById('mailPassword').value = apiKeys.MAIL_PASSWORD;
            document.getElementById('mailFromAddress').value = apiKeys.MAIL_FROM_ADDRESS;
            document.getElementById('mailFromName').value = apiKeys.MAIL_FROM_NAME;
        }

        function saveApiKeys() {
            // Update apiKeys object from form
            apiKeys.OPENAI_API_KEY = document.getElementById('openaiApiKey').value;
            apiKeys.OPENAI_MODEL = document.getElementById('openaiModel').value;
            apiKeys.OPENAI_BASE_URL = document.getElementById('openaiBaseUrl').value;
            apiKeys.LLM_PROVIDER = document.getElementById('llmProvider').value;
            apiKeys.OPENROUTER_API_KEY = document.getElementById('openrouterApiKey').value;
            apiKeys.OPENROUTER_MODEL = document.getElementById('openrouterModel').value;
            apiKeys.OPENROUTER_BASE_URL = document.getElementById('openrouterBaseUrl').value;
            apiKeys.OPENROUTER_SITE_URL = document.getElementById('openrouterSiteUrl').value;
            apiKeys.OPENROUTER_APP_TITLE = document.getElementById('openrouterAppTitle').value;
            apiKeys.PAGESPEED_API_KEY = document.getElementById('pagespeedApiKey').value;
            apiKeys.SERPER_API_KEY = document.getElementById('serperApiKey').value;
            apiKeys.GOOGLE_PLACES_API_KEY = document.getElementById('googlePlacesApiKey').value;
            apiKeys.GOOGLE_AUTH_API_KEY = document.getElementById('googleAuthApiKey').value;
            apiKeys.MAIL_MAILER = document.getElementById('mailMailer').value;
            apiKeys.MAIL_SCHEME = document.getElementById('mailScheme').value;
            apiKeys.MAIL_HOST = document.getElementById('mailHost').value;
            apiKeys.MAIL_PORT = document.getElementById('mailPort').value;
            apiKeys.MAIL_USERNAME = document.getElementById('mailUsername').value;
            apiKeys.MAIL_PASSWORD = document.getElementById('mailPassword').value;
            apiKeys.MAIL_FROM_ADDRESS = document.getElementById('mailFromAddress').value;
            apiKeys.MAIL_FROM_NAME = document.getElementById('mailFromName').value;

            // Save to localStorage for persistence
            localStorage.setItem('apiKeys', JSON.stringify(apiKeys));

            // Backend API integration (example - uncomment when backend is ready)
            // fetch('/api/settings/keys', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //         'Authorization': `Bearer ${localStorage.getItem('token')}`
            //     },
            //     body: JSON.stringify(apiKeys)
            // })
            // .then(response => response.json())
            // .then(data => showAlert('API Keys updated successfully!', 'success'))
            // .catch(error => showAlert('Error updating API Keys: ' + error.message, 'danger'));

            // Show success message
            showAlert('API Keys updated successfully!', 'success');
        }

        function resetApiKeys() {
            loadApiKeys();
            showAlert('API Keys reset to saved values.', 'info');
        }

        function toggleKeyVisibility(inputId) {
            const input = document.getElementById(inputId);
            if (input.type === 'password') {
                input.type = 'text';
            } else {
                input.type = 'password';
            }
        }

        function showAlert(message, type = 'info') {
            const alertContainer = document.getElementById('alertContainer');
            const alertId = 'alert-' + Date.now();
            
            const alertClass = type === 'success' ? 'alert-success' : (type === 'danger' ? 'alert-danger' : 'alert-info');
            
            const alertHtml = `
                <div id="${alertId}" class="alert ${alertClass} alert-dismissible fade show" role="alert">
                    ${message}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            `;
            
            alertContainer.insertAdjacentHTML('beforeend', alertHtml);
            
            // Auto-remove alert after 5 seconds
            setTimeout(() => {
                const alert = document.getElementById(alertId);
                if (alert) {
                    alert.remove();
                }
            }, 5000);
        }
    </script>
</body>

</html>
